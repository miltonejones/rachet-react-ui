{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from 'react';\nimport useComponentState from './useComponentState';\n\nconst styleParse = i => Object.keys(i).filter(i => isNaN(i)).map(key => ({\n  key,\n  value: i[key]\n}));\n\nexport default function useInspector() {\n  _s();\n\n  const {\n    state,\n    setState\n  } = useComponentState();\n  const {\n    open,\n    detail,\n    stats,\n    style\n  } = state;\n\n  const setOpen = f => setState('open', f);\n\n  const ref = /*#__PURE__*/React.createRef();\n  React.useEffect(() => {\n    const node = ref.current;\n    if (!node) return;\n    const {\n      offsetTop: y,\n      offsetHeight: h,\n      offsetWidth: w,\n      offsetLeft: x,\n      children\n    } = node;\n    const figures = `x: ${x} y: ${y} w: ${w} h: ${h} `;\n    /**\r\n     * IMPORTANT: don't do anything unless values change\r\n     */\n\n    if (stats === figures) return;\n    setState('stats', figures);\n    setState('style', {\n      '--inspector-top': `${y}px`,\n      '--inspector-left': `${x}px`\n    });\n    !!children && setState('detail', (x => {\n      Array.from(children).filter(c => c.className !== 'stats').map((c, index) => {\n        x.push({\n          index,\n          name: c.localName + '.' + c.className,\n          styles: styleParse(window.getComputedStyle(c))\n        });\n      });\n      return x;\n    })([]));\n  }, [ref, stats]);\n  const shown = !(detail !== null && detail !== void 0 && detail.length) ? null : detail[0];\n  return {\n    open,\n    setOpen,\n    shown,\n    ref,\n    stats,\n    style\n  };\n}\n\n_s(useInspector, \"NzN2j8sxkNlKwDf6atg2Hn1Q1ZA=\", false, function () {\n  return [useComponentState];\n});","map":{"version":3,"sources":["/home/miltonejones/projects/rachet-react-ui/src/components/UI/hooks/useInspector.js"],"names":["React","useComponentState","styleParse","i","Object","keys","filter","isNaN","map","key","value","useInspector","state","setState","open","detail","stats","style","setOpen","f","ref","createRef","useEffect","node","current","offsetTop","y","offsetHeight","h","offsetWidth","w","offsetLeft","x","children","figures","Array","from","c","className","index","push","name","localName","styles","window","getComputedStyle","shown","length"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,iBAAP,MAA8B,qBAA9B;;AAEA,MAAMC,UAAU,GAAIC,CAAD,IACjBC,MAAM,CAACC,IAAP,CAAYF,CAAZ,EACGG,MADH,CACWH,CAAD,IAAOI,KAAK,CAACJ,CAAD,CADtB,EAEGK,GAFH,CAEQC,GAAD,KAAU;AAAEA,EAAAA,GAAF;AAAOC,EAAAA,KAAK,EAAEP,CAAC,CAACM,GAAD;AAAf,CAAV,CAFP,CADF;;AAKA,eAAe,SAASE,YAAT,GAAwB;AAAA;;AACrC,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAsBZ,iBAAiB,EAA7C;AACA,QAAM;AAAEa,IAAAA,IAAF;AAAQC,IAAAA,MAAR;AAAgBC,IAAAA,KAAhB;AAAuBC,IAAAA;AAAvB,MAAiCL,KAAvC;;AACA,QAAMM,OAAO,GAAIC,CAAD,IAAON,QAAQ,CAAC,MAAD,EAASM,CAAT,CAA/B;;AACA,QAAMC,GAAG,gBAAGpB,KAAK,CAACqB,SAAN,EAAZ;AACArB,EAAAA,KAAK,CAACsB,SAAN,CAAgB,MAAM;AACpB,UAAMC,IAAI,GAAGH,GAAG,CAACI,OAAjB;AACA,QAAI,CAACD,IAAL,EAAW;AACX,UAAM;AACJE,MAAAA,SAAS,EAAEC,CADP;AAEJC,MAAAA,YAAY,EAAEC,CAFV;AAGJC,MAAAA,WAAW,EAAEC,CAHT;AAIJC,MAAAA,UAAU,EAAEC,CAJR;AAKJC,MAAAA;AALI,QAMFV,IANJ;AAOA,UAAMW,OAAO,GAAI,MAAKF,CAAE,OAAMN,CAAE,OAAMI,CAAE,OAAMF,CAAE,GAAhD;AAEA;AACJ;AACA;;AACI,QAAIZ,KAAK,KAAKkB,OAAd,EAAuB;AACvBrB,IAAAA,QAAQ,CAAC,OAAD,EAAUqB,OAAV,CAAR;AACArB,IAAAA,QAAQ,CAAC,OAAD,EAAU;AAChB,yBAAoB,GAAEa,CAAE,IADR;AAEhB,0BAAqB,GAAEM,CAAE;AAFT,KAAV,CAAR;AAIA,KAAC,CAACC,QAAF,IACEpB,QAAQ,CACN,QADM,EAEN,CAAEmB,CAAD,IAAO;AACNG,MAAAA,KAAK,CAACC,IAAN,CAAWH,QAAX,EACG3B,MADH,CACW+B,CAAD,IAAOA,CAAC,CAACC,SAAF,KAAgB,OADjC,EAEG9B,GAFH,CAEO,CAAC6B,CAAD,EAAIE,KAAJ,KAAc;AACjBP,QAAAA,CAAC,CAACQ,IAAF,CAAO;AACLD,UAAAA,KADK;AAELE,UAAAA,IAAI,EAAEJ,CAAC,CAACK,SAAF,GAAc,GAAd,GAAoBL,CAAC,CAACC,SAFvB;AAGLK,UAAAA,MAAM,EAAEzC,UAAU,CAAC0C,MAAM,CAACC,gBAAP,CAAwBR,CAAxB,CAAD;AAHb,SAAP;AAKD,OARH;AASA,aAAOL,CAAP;AACD,KAXD,EAWG,EAXH,CAFM,CADV;AAgBD,GArCD,EAqCG,CAACZ,GAAD,EAAMJ,KAAN,CArCH;AAsCA,QAAM8B,KAAK,GAAG,EAAC/B,MAAD,aAACA,MAAD,eAACA,MAAM,CAAEgC,MAAT,IAAkB,IAAlB,GAAyBhC,MAAM,CAAC,CAAD,CAA7C;AACA,SAAO;AACLD,IAAAA,IADK;AAELI,IAAAA,OAFK;AAGL4B,IAAAA,KAHK;AAIL1B,IAAAA,GAJK;AAKLJ,IAAAA,KALK;AAMLC,IAAAA;AANK,GAAP;AAQD;;GApDuBN,Y;UACMV,iB","sourcesContent":["import React from 'react';\r\nimport useComponentState from './useComponentState';\r\n\r\nconst styleParse = (i) =>\r\n  Object.keys(i)\r\n    .filter((i) => isNaN(i))\r\n    .map((key) => ({ key, value: i[key] }));\r\n\r\nexport default function useInspector() {\r\n  const { state, setState } = useComponentState();\r\n  const { open, detail, stats, style } = state;\r\n  const setOpen = (f) => setState('open', f);\r\n  const ref = React.createRef();\r\n  React.useEffect(() => {\r\n    const node = ref.current;\r\n    if (!node) return;\r\n    const {\r\n      offsetTop: y,\r\n      offsetHeight: h,\r\n      offsetWidth: w,\r\n      offsetLeft: x,\r\n      children,\r\n    } = node;\r\n    const figures = `x: ${x} y: ${y} w: ${w} h: ${h} `;\r\n\r\n    /**\r\n     * IMPORTANT: don't do anything unless values change\r\n     */\r\n    if (stats === figures) return;\r\n    setState('stats', figures);\r\n    setState('style', {\r\n      '--inspector-top': `${y}px`,\r\n      '--inspector-left': `${x}px`,\r\n    });\r\n    !!children &&\r\n      setState(\r\n        'detail',\r\n        ((x) => {\r\n          Array.from(children)\r\n            .filter((c) => c.className !== 'stats')\r\n            .map((c, index) => {\r\n              x.push({\r\n                index,\r\n                name: c.localName + '.' + c.className,\r\n                styles: styleParse(window.getComputedStyle(c)),\r\n              });\r\n            });\r\n          return x;\r\n        })([])\r\n      );\r\n  }, [ref, stats]);\r\n  const shown = !detail?.length ? null : detail[0];\r\n  return {\r\n    open,\r\n    setOpen,\r\n    shown,\r\n    ref,\r\n    stats,\r\n    style,\r\n  };\r\n}\r\n"]},"metadata":{},"sourceType":"module"}